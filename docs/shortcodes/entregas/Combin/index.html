<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Entrega 02 - 3D Brush #  Introducción #  Se presentará un demo que ilustra una aplicación de pintura en 3D que utiliza transformaciones de pantalla a mundo, similares a las empleadas en el Ray-casting, en la cual el usuario será capaz de mover con los dedos de su mano izquierda el mundo y con los dedos de su mano derecha será capaz de dibujar, todo esto a través de la cámara donde los rayos de luz virtuales se &ldquo;emiten&rdquo; o &ldquo;trazan&rdquo; en su camino desde el punto focal de una cámara a través de cada píxel en el sensor de la cámara para determinar qué es visible a lo largo del rayo en el escena 3D."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Entrega 02 - 3D Brush #  Introducción #  Se presentará un demo que ilustra una aplicación de pintura en 3D que utiliza transformaciones de pantalla a mundo, similares a las empleadas en el Ray-casting, en la cual el usuario será capaz de mover con los dedos de su mano izquierda el mundo y con los dedos de su mano derecha será capaz de dibujar, todo esto a través de la cámara donde los rayos de luz virtuales se &ldquo;emiten&rdquo; o &ldquo;trazan&rdquo; en su camino desde el punto focal de una cámara a través de cada píxel en el sensor de la cámara para determinar qué es visible a lo largo del rayo en el escena 3D."><meta property="og:type" content="article"><meta property="og:url" content="https://vcwork.github.io/project/docs/shortcodes/entregas/Combin/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-05-22T20:44:23-05:00"><title>Combin | Showcase Template</title><link rel=manifest href=/project/manifest.json><link rel=icon href=/project/favicon.png type=image/x-icon><link rel=stylesheet href=/project/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/project/flexsearch.min.js></script>
<script defer src=/project/en.search.min.95a4304d7ee648981016dee322618ad695828ea81a6a04a7c21711dc47481782.js integrity="sha256-laQwTX7mSJgQFt7jImGK1pWCjqgaagSnwhcR3EdIF4I=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/project/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/project/docs/shortcodes/buttons/>Buttons</a></li><li><a href=/project/docs/shortcodes/columns/>Columns</a></li><li><a href=/project/docs/shortcodes/details/>Details</a></li><li><input type=checkbox id=section-a654c2eba7b23af64738403bc1d6a66d class=toggle checked>
<label for=section-a654c2eba7b23af64738403bc1d6a66d class="flex justify-between"><a href=/project/docs/shortcodes/entregas/>Entregas</a></label><ul><li><a href=/project/docs/shortcodes/entregas/Combin/ class=active>Combin</a></li><li><a href=/project/docs/shortcodes/entregas/ilusiones/>Ilusiones</a></li><li><a href=/project/docs/shortcodes/entregas/Ray-Tracing/>Ray Tracing</a></li></ul></li><li><a href=/project/docs/shortcodes/expand/>Expand</a></li><li><a href=/project/docs/shortcodes/hints/>Hints</a></li><li><a href=/project/docs/shortcodes/katex/>Katex</a></li><li><a href=/project/docs/shortcodes/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/project/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/project/docs/shortcodes/p5/div/>Div</a></li><li><a href=/project/docs/shortcodes/p5/iframe/>Iframe</a></li></ul></li><li><a href=/project/docs/shortcodes/tabs/>Tabs</a></li></ul></li></ul><ul><li><a href=/project/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/project/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Combin</strong>
<label for=toc-control><img src=/project/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#entrega-02---3d-brush>Entrega 02 - 3D Brush</a><ul><li><a href=#introducción>Introducción</a></li><li><a href=#contexto>Contexto</a><ul><li><a href=#ray-casting>Ray Casting</a></li></ul></li><li><a href=#resultados>Resultados</a></li><li><a href=#conclusiones-y-trabajo-futuro>Conclusiones y trabajo futuro</a></li><li><a href=#recursos>Recursos</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=entrega-02---3d-brush>Entrega 02 - 3D Brush
<a class=anchor href=#entrega-02---3d-brush>#</a></h1><h2 id=introducción>Introducción
<a class=anchor href=#introducci%c3%b3n>#</a></h2><p>Se presentará un demo que ilustra una aplicación de pintura en 3D que utiliza transformaciones de pantalla a mundo, similares a las empleadas en el Ray-casting, en la cual el usuario será capaz de mover con los dedos de su mano izquierda el mundo y con los dedos de su mano derecha será capaz de dibujar, todo esto a través de la cámara donde los rayos de luz virtuales se &ldquo;emiten&rdquo; o &ldquo;trazan&rdquo; en su camino desde el punto focal de una cámara a través de cada píxel en el sensor de la cámara para determinar qué es visible a lo largo del rayo en el escena 3D.</p><h2 id=contexto>Contexto
<a class=anchor href=#contexto>#</a></h2><h3 id=ray-casting>Ray Casting
<a class=anchor href=#ray-casting>#</a></h3><p>El Ray casting es el más básico de muchos algoritmos de renderización de gráficos por computadora que usan el algoritmo geométrico de ray tracing. Los algoritmos basados en ray tracing operan en orden de imagen para renderizar escenas tridimensionales a imágenes bidimensionales. Los rayos geométricos son trazados desde el ojo del observador (trazado hacia atrás) para calcular la radiancia que viaja hacia el observador en la dirección del rayo. La rapidez y simplicidad del trazado de los rayos provienen de computar el color de la luz sin trazar recursivamente rayos adicionales para obtener la radiancia incidente en el punto donde el rayo intercepta. Esto elimina la posibilidad de renderizar con exactitud las reflexiones, refracciones, y las sombras. Aun así todos estos elementos pueden ser simulados en un cierto grado, con el uso ingenioso de mapas de textura u otros métodos. La velocidad de cómputo del ray casting lo convirtió en un método práctico de renderizado para los primeros videojuegos de 3D con renderización de escenas en tiempo real.</p><p><img src=https://upload.wikimedia.org/wikipedia/commons/3/3a/Anarch_short_gameplay.gif width=300> | <img src=https://www.computerhope.com/jargon/r/ray-casting-diagram.jpg width=300></p><h2 id=resultados>Resultados
<a class=anchor href=#resultados>#</a></h2><iframe id=Combinado style=width:625px;height:475px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
            
             <script src=https://unpkg.com/handsfree@8.4.2/build/lib/handsfree.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            <script src=/project/sketches/Combinado.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=conclusiones-y-trabajo-futuro>Conclusiones y trabajo futuro
<a class=anchor href=#conclusiones-y-trabajo-futuro>#</a></h2><p>Como se observa se puede mover el mundo con ayuda de la mano izquierda, gracias a la librería Handsfree.js la cual es capaz de detectar la posición de los dedos y simular la profundidad con la cámara web. Al ejecutar la cámara en la página web esta consume muchos recursos de la CPU ya que hace software rendering en la pintura en 3D, y por otro lado, este tiene algunos problemas al reconocer los gestos, pero se ha podido dibujar y manipular el mundo.</p><p>Para trabajos futuros se espera que se puedan hacer dibujos más fácilmente y con diferentes texturas, además que se pueda optimizar el algoritmo o la manera de interpretar los gestos para un manejo más fácil del mundo y también una manera más dinámica para dibujar, este es un tema apasionante y también con un gran futuro por delante ya que pueden existir varios usos importantes en todas las ramas del conocimiento en las que se puedan aplicar este tipo de algoritmos.</p><h2 id=recursos>Recursos
<a class=anchor href=#recursos>#</a></h2><ul><li><p>colaboradores de Wikipedia. (2022, 26 febrero). Ray casting. Wikipedia, la enciclopedia libre. <a href=https://es.wikipedia.org/wiki/Ray_castingnpm>https://es.wikipedia.org/wiki/Ray_castingnpm</a>: handsfree. (2021, 28 agosto).</p></li><li><p>Npm. <a href=https://www.npmjs.com/package/handsfree>https://www.npmjs.com/package/handsfree</a></p></li><li><p>Wikipedia contributors. (2022, 10 mayo). Ray casting. Wikipedia. <a href=https://en.wikipedia.org/wiki/Ray_casting#History_of_ray_casting>https://en.wikipedia.org/wiki/Ray_casting#History_of_ray_casting</a></p></li></ul><p>{{- define &ldquo;page-script&rdquo; -}}
<canvas height=600 id=canvas style="border:1px grey solid" width=600></p><script>var y,x,canvas=document.getElementById("canvas"),viewport_size,projection_plane_z,camera_position,background_color,spheres,lights,CanvasToViewport,IntersectRaySphere,ComputeLighting,TraceRay,direction,color,canvas_context=canvas.getContext("2d"),canvas_buffer=canvas_context.getImageData(0,0,canvas.width,canvas.height),canvas_pitch=canvas_buffer.width*4,PutPixel=function(e,t,s){if(e=canvas.width/2+e,t=canvas.height/2-t-1,e<0||e>=canvas.width||t<0||t>=canvas.height)return;var n=4*e+canvas_pitch*t;canvas_buffer.data[n++]=s[0],canvas_buffer.data[n++]=s[1],canvas_buffer.data[n++]=s[2],canvas_buffer.data[n++]=255},UpdateCanvas=function(){canvas_context.putImageData(canvas_buffer,0,0)},DotProduct=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},Length=function(e){return Math.sqrt(DotProduct(e,e))},Multiply=function(e,t){return[e*t[0],e*t[1],e*t[2]]},Add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},Subtract=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},Clamp=function(e){return[Math.min(255,Math.max(0,e[0])),Math.min(255,Math.max(0,e[1])),Math.min(255,Math.max(0,e[2]))]},Sphere=function(e,t,n){this.center=e,this.radius=t,this.color=n},Light=function(e,t,n){this.ltype=e,this.intensity=t,this.position=n};Light.AMBIENT=0,Light.POINT=1,Light.DIRECTIONAL=2,viewport_size=1,projection_plane_z=1,camera_position=[0,0,0],background_color=[255,255,255],spheres=[new Sphere([0,-1,3],1,[255,0,0]),new Sphere([2,0,4],1,[0,0,255]),new Sphere([-2,0,4],1,[0,255,0]),new Sphere([0,-5001,0],5e3,[255,255,0])],lights=[new Light(Light.AMBIENT,.2),new Light(Light.POINT,.6,[2,1,0]),new Light(Light.DIRECTIONAL,.2,[1,4,4])],CanvasToViewport=function(e){return[e[0]*viewport_size/canvas.width,e[1]*viewport_size/canvas.height,projection_plane_z]},IntersectRaySphere=function(c,t,n){var a,r,s=Subtract(c,n.center),o=DotProduct(t,t),e=2*DotProduct(s,t),l=DotProduct(s,s)-n.radius*n.radius,i=e*e-4*o*l;return i<0?[1/0,1/0]:(a=(-e+Math.sqrt(i))/(2*o),r=(-e-Math.sqrt(i))/(2*o),[a,r])},ComputeLighting=function(r,i){for(var e,t,n,s=0,a=Length(i),o=0;o<lights.length;o++)e=lights[o],e.ltype==Light.AMBIENT?s+=e.intensity:(e.ltype==Light.POINT?t=Subtract(e.position,r):t=e.position,n=DotProduct(i,t),n>0&&(s+=e.intensity*n/(a*Length(t))));return s},TraceRay=function(a,r,c,l){for(var e,n,i,s=1/0,o=null,t=0;t<spheres.length;t++)e=IntersectRaySphere(a,r,spheres[t]),e[0]<s&&c<e[0]&&e[0]<l&&(s=e[0],o=spheres[t]),e[1]<s&&c<e[1]&&e[1]<l&&(s=e[1],o=spheres[t]);return o==null?background_color:(i=Add(a,Multiply(s,r)),n=Subtract(i,o.center),n=Multiply(1/Length(n),n),Multiply(ComputeLighting(i,n),o.color))};for(x=-canvas.width/2;x<canvas.width/2;x++)for(y=-canvas.height/2;y<canvas.height/2;y++)direction=CanvasToViewport([x,y]),color=TraceRay(camera_position,direction,1,1/0),PutPixel(x,y,Clamp(color));UpdateCanvas()</script><p>{{- end -}}</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://vcwork.github.io/project/commit/d34c497daae1661bc747251ca8338095895ef318 title="Last modified by Fernando Moreno | May 23, 2022" target=_blank rel=noopener><img src=/project/svg/calendar.svg class=book-icon alt=Calendar>
<span>May 23, 2022</span></a></div></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#entrega-02---3d-brush>Entrega 02 - 3D Brush</a><ul><li><a href=#introducción>Introducción</a></li><li><a href=#contexto>Contexto</a><ul><li><a href=#ray-casting>Ray Casting</a></li></ul></li><li><a href=#resultados>Resultados</a></li><li><a href=#conclusiones-y-trabajo-futuro>Conclusiones y trabajo futuro</a></li><li><a href=#recursos>Recursos</a></li></ul></li></ul></nav></div></aside></main></body></html>